# The following five lines of boilerplate have to be in your project's
# CMakeLists in this exact order for cmake to work correctly
cmake_minimum_required(VERSION 3.5)

include($ENV{IDF_PATH}/tools/cmake/project.cmake)
set(CMAKE_CXX_STANDARD 17)
list(APPEND compile_definitions "ARDUINO=202000")

# Ignore warning in Azure IoT Library in esp32 Arduino
# pending PR: https://github.com/VSChina/ESP32_AzureIoT_Arduino/pull/15
list(APPEND compile_options "-Wno-maybe-uninitialized")
set(CONFIG_LV_TOUCH_CONTROLLER_FT6X06 1)
set(CONFIG_LV_TOUCH_CONTROLLER_FT6X06 1 CACHE INTERNAL "")
set(CONFIG_LV_TOUCH_CONTROLLER_FT6X06 "This is variable 1" CACHE INTERNAL "")
SET_PROPERTY(GLOBAL PROPERTY CONFIG_LV_TOUCH_CONTROLLER_FT6X06 "MyGlobalPropertyValue")
set(CONFIG_LV_TOUCH_CONTROLLER_FT6X06 "Some value" CACHE STRING "Description")
set_property(GLOBAL PROPERTY CONFIG_LV_TOUCH_CONTROLLER_FT6X06 1) 
list(APPEND EXTRA_COMPONENT_DIRS components/lvgl_esp32_drivers components/lvgl_esp32_drivers/lvgl_touch components/lvgl_esp32_drivers/lvgl_tft)

if(BOARD STREQUAL "M5STACKCORE2")
  message(STATUS "Compiling for M5Stack Core2")
  list(APPEND compile_definitions "M5StackCore2")
  set(CONFIG_LV_TOUCH_CONTROLLER_FT6X06 1)
set(CONFIG_LV_TOUCH_CONTROLLER_FT6X06 True CACHE INTERNAL Bool)
set_property(GLOBAL PROPERTY CONFIG_LV_TOUCH_CONTROLLER_FT6X06 True) 
  set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS}-DCONFIG_LV_TFT_DISPLAY_PROTOCOL_SPI \
    -DCONFIG_LV_TFT_DISPLAY_SPI_HSPI -DCONFIG_LV_TFT_DISPLAY_CONTROLLER_ILI9341 \
    -DCONFIG_LV_DISP_SPI_MOSI=23 \
    -DCONFIG_LV_DISPLAY_USE_SPI_MISO=y \
    -DCONFIG_LV_DISP_SPI_MISO=38 \
    -DCONFIG_LV_DISP_SPI_INPUT_DELAY_NS=0 \
    -DCONFIG_LV_DISP_SPI_CLK=18 \
    -DCONFIG_LV_DISPLAY_USE_SPI_CS=y \
    -DCONFIG_LV_DISP_SPI_CS=5 \
    -DCONFIG_LV_DISPLAY_USE_DC=y \
    -DCONFIG_LV_DISP_PIN_DC=15 \
    -DCONFIG_LV_DISP_PIN_BUSY=35 \
    -DCONFIG_LV_DISP_PIN_SDA=5 \
    -DCONFIG_LV_DISP_PIN_SCL=4 \
    -DCONFIG_LV_TFT_DISPLAY_CONTROLLER_ILI9341  \
    -DCONFIG_LV_TFT_DISPLAY_PROTOCOL_SPI \
    -DCONFIG_DISPLAY_ORIENTATION_PORTRAIT \
    -DCONFIG_LV_DISPLAY_ORIENTATION=0 \
    -DCONFIG_LV_PREDEFINED_PINS_NONE \
    -DCONFIG_LV_TFT_DISPLAY_USER_CONTROLLER_ILI9341 \
    -DCONFIG_LV_TFT_DISPLAY_SPI_HSPI \
    -DCONFIG_LV_TFT_DISPLAY_SPI_TRANS_MODE_SIO= \
    -DCONFIG_LV_TFT_DISPLAY_SPI_HALF_DUPLEX \
    -DCONFIG_LV_TFT_CUSTOM_SPI_CLK_DIVIDER=2 \
    -DCONFIG_LV_TOUCH_CONTROLLER=2 \
    -DCONFIG_LV_TOUCH_CONTROLLER_FT6X06=y \
    -DCONFIG_LV_TOUCH_DRIVER_PROTOCOL_I2C \
    -DCONFIG_LV_TOUCH_I2C_PORT_0 \
    -DCONFIG_LV_TOUCH_I2C_SDA=21 \
    -DCONFIG_LV_TOUCH_I2C_SCL=22 \
    -DCONFIG_LV_AXP192_PIN_SDA=21 \
    -DCONFIG_LV_AXP192_PIN_SCL=22 \
    -DM5StackCore2 -DTFT_WIDTH=320 -DTFT_HEIGHT=240 -DLV_HIGH_RESOURCE_MCU=1 \
    -DLV_CONF_INCLUDE_SIMPLE")
endif(BOARD STREQUAL "M5STACKCORE2")

project(homepoint)
